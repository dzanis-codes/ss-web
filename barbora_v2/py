#!apt-get update
#!apt install chromium-chromedriver
#!cp /usr/lib/chromium-browser/chromedriver /usr/bin
#!pip install selenium

from selenium import webdriver
import time
from bs4 import BeautifulSoup
import json
import requests
from selenium.webdriver.chrome.options import Options
import sys
import sqlite3
import traceback
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys


chrome_options = Options()
chrome_options.add_argument("--no-sandbox") # linux only
chrome_options.add_argument("--disable-gpu")

chrome_options.add_argument("--headless")

driver = webdriver.Chrome("/usr/lib/chromium-browser/chromedriver", options=chrome_options)
driver.execute_cdp_cmd('Network.setUserAgentOverride', {"userAgent": 'Chrome/83.0.4103.97'})
print(driver.execute_script("return navigator.userAgent;"))

driver.execute_cdp_cmd("Page.addScriptToEvaluateOnNewDocument", {
    "source":
        "const newProto = navigator.__proto__;"
        "delete newProto.webdriver;"
        "navigator.__proto__ = newProto;"
    })
driver.get("https://barbora.lv/")
time.sleep(10)
print("1")
#soup = BeautifulSoup(driver.page_source, 'html.parser')
#print(soup)
print("..2")




a = driver.find_element(By.XPATH, '//*[@id="regionApp"]/div[1]/div/div[2]/div/div/div/div[2]/div/div[1]/div/div[2]/div/div[1]/input')
print(a)
print(a.text)
print("..3")
driver.execute_script("arguments[0].click();", a)
print("..4")
#a.click()
a.send_keys("Rīga un Jūrmala")
#a.submit()
time.sleep(2)
print("..5")


b = driver.find_element(By.XPATH, '//*[@id="regionApp"]/div[1]/div/div[2]/div/div/div/div[2]/div/div[1]/div/div[2]/div/div[1]/input')
driver.execute_script("arguments[0].click();", b)
print(b)
print(b.text)
time.sleep(2)
print("..7")

c = driver.find_element(By.XPATH, '//*[@id="regionApp"]/div[1]/div/div[2]/div/div/div/div[2]/div/div[1]/div/div[2]/div/div[2]/div/ul/li')
driver.execute_script("arguments[0].click();", c)
time.sleep(2)


d = driver.find_element(By.XPATH, '//*[@id="regionApp"]/div[1]/div/div[2]/div/div/div/div[2]/div/div[3]/div/button')
driver.execute_script("arguments[0].click();", d)
time.sleep(7)


soup = BeautifulSoup(driver.page_source, 'html.parser')
print(soup)

b = driver.find_element(By.XPATH, '//*[@id="regionApp"]/div[1]/div/div[2]/div/div/div/div[2]/div/div[1]/div/div[2]/div/div[1]/input')

print(b)
print(b.text)






#regionApp > div.b-region > div > div.container-fluid > div > div > div > div.row > div > div.b-region--search > div > div.col-md-9 > div > div.b-region--search-block-input > input[type=text]


